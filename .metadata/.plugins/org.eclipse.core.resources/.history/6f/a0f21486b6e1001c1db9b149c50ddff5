<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
	pageEncoding="ISO-8859-1"%>
<%@ page
	import="org.hibernate.*,
                    org.hibernate.cfg.Configuration,
                    com.wipro.velocity.User,
                    java.util.*"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>HQL DML Operations</title>
</head>
<body>
	<h1>HQL DML Operations</h1>
	<%
	Configuration cfg = new Configuration();
	cfg.configure("hibernate.cfg.xml");

	SessionFactory factory = cfg.buildSessionFactory();
	Session sess = factory.openSession();
	sess.beginTransaction();

	String hql = "update User set password = :password where id = :id";

	Query query = sess.createQuery(hql);
	query.setParameter("password", "cool123");
	query.setParameter("id", 2);

	int rowsAffected = query.executeUpdate();
	if (rowsAffected > 0) {
		out.println("Updated " + rowsAffected + " rows.");
	}

	sess.getTransaction().commit();
	sess.close();
	factory.close();
	%>
</body>
</html>